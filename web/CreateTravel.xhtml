<?xml version="1.0" encoding="UTF-8"?>

<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

    <html xmlns="http://www.w3.org/1999/xhtml">
        <h:head>
            <title>Gestion Viajes</title>
            <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        </h:head>
        <h:body style="border: 0px; margin: 0px;">
            <section class="container">
                <header class="header">
                    <img class="header-image" src="image/universidad.jpg" width="180px" height="100%" alt="Logo Universidad" />
                    <p class="header-title">Gestion de viajes</p>
                </header>

                <section class="form">
                    <h:form id="crear" >
                        <p:messages id="messages" showDetail="true" closable="true">
                            <p:autoUpdate/>
                        </p:messages>

                        <p:panel header="Crear viaje"  >

                            <label for="@next" >Empleado</label>
                            <p:selectOneMenu id="empleado" value="#{manejadorBean.nombreEmpleado}">
                                <f:selectItem itemLabel="Seleccione..." itemValue=""/>
                                <f:selectItems value="#{manejadorBean.listaEmpleados}"/>
                            </p:selectOneMenu>
                            <br/>
                            <span class="ui-float-label">
                                <p:inputText id="fecha" value="#{manejadorBean.fechaViaje}"/>
                                <p:outputLabel for="@previous" value="Fecha"/>
                            </span>
                            <br/>
                            <span class="ui-float-label">
                                <p:inputText id="Destino" value="#{manejadorBean.destino}"/>
                                <p:outputLabel for="@previous" value="Destino"/>
                            </span>
                            <br/>

                            <p:dataTable 
                                id="tableItem" 
                                value="#{manejadorBean.lista}" 
                                var="item" 
                                paginator="true"
                                style="display: grid; width: 80%; align-content: flex-start" >
                                <p:column headerText="Item" style="width: 70%">
                                    <h:outputLabel value= "Archivo1"/>
                                </p:column>
                                <p:column headerText="Precio" style="width: 70%">
                                    <h:outputLabel value= "20000"/>
                                </p:column>
                                <p:column headerText="Acciones" style="width:30%">
                                    <p:commandButton icon="ui-icon-pencil" />
                                    <p:commandButton icon="ui-icon-trash"  update="tableItem"/>
                                </p:column>
                            </p:dataTable>

                            <p:commandButton value="Actualizar lista" actionListener="#{manejadorBean.listar()}" update="tableItem" style="height: 10%; padding: 5px" />
                            <p:commandButton value="Añadir Item"  oncomplete="PF('viaje').show();" update=":dialog" style="height: 10%; padding: 5px" />

                            <br/>

                            <p:commandButton value="Ingresar" actionListener="#{manejadorBean.guardar()}"  />
                            <h:link class="box-button_create" value = "Regresar" outcome = "index.xhtml" />
                            <br/>
                        </p:panel>
                    </h:form>
                </section>


                <p:dialog id="dialog" header="Datos a modificar" widgetVar="viaje"  resizable="false" modal="true" showEffect="clip" >

                    <h:form>

                        <span class="ui-float-label">
                            <p:inputText id="id" value="#{manejadorBean.destino}"/>
                            <p:outputLabel for="@previous" value="Nombre"/>
                        </span>
                        <br/>
                        <span class="ui-float-label" >
                            <p:inputText id="nombre" value="#{manejadorBean.nombreEmpleado}"/>
                            <p:outputLabel for="@previous" value="Peso"/>
                        </span>
                        <br/>


                        <p:commandButton value="Cancelar" oncomplete="PF('viaje').hide();" />
                    </h:form>
                </p:dialog>



                <footer class="footer">
                    <p>Universidad Central</p>
                    <p>Realizado por Omar Andres Perez Gil - Estudiante de ingenieria de sistemas</p>
                    <p>Tutor Giovanny Alexander Briceño Riveros</p>
                    <p>2021 </p>
                </footer>
            </section>

            <style>
                .container{
                    width: 100%;
                    height: 100%;
                    display: grid;
                    grid-template-areas: 
                        "head head head"
                        "left form right"
                        "left buttons right"
                        "foot foot foot";
                    grid-template-rows: 1fr 6fr 2fr 1fr ;
                    grid-template-columns: 1fr 3fr 1fr;
                }
                .header{
                    display: grid;
                    grid-area: head;
                    grid-template-rows: 1fr ;
                    grid-template-columns: 1fr 5fr 1fr;
                    align-items: stretch;
                    background: cadetblue;
                }
                .header-title{
                    font-size: 50px;
                    justify-content: center;
                    align-content: center;
                }
                .form{
                    margin-top: 20px;
                    display: grid;
                    grid-area: form;
                    width: 100%;
                }
                .footer{
                    grid-area: foot;
                    background: cadetblue; 
                    justify-items: center;
                    align-items: center;
                }
                p{
                    display: grid;
                    justify-items: center;
                    font-size: 20;
                    margin: 5;
                }
            </style>
        </h:body>
    </html>
</f:view>